% Master thesis (incl. term project) @ BUT FIT <www.fit.vutbr.cz>
% Symbolic Execution of C Programs Based on Sparse
% Copyright (C) 2011 Jan Pokorn√Ω

\makeatletter

% New file writer for `thesisWriteIncludedTo'
\newwrite\thesis@tempfile
% Counters exploited to simulate arrays/lists and an iterator over it
\newcounter{thesis@chapters}
\newcounter{thesis@appendices}
\newcounter{thesis@iterator}

% This is how the file added using `\thesisInclude' must NOT be named
% (this applies on any other macro/command defined here or elsewere as well);
% "GUARD" because it is effectively used as a recursion guard
\def\GUARD{}

% [private] Interface to underlaying storage of "arrays" as variables
\newcommand{\thesis@setViaIndex}[3]{%
  \expandafter\def \csname thesis@#1@#2\endcsname{#3}
}
\newcommand{\thesis@getViaIndex}[2]{%
  \@ifundefined{thesis@#1@#2}{GUARD}{\@nameuse{thesis@#1@#2}}%
}


% [private] Layer using the interface above to manipulate arrays/lists
\newcommand{\thesis@add}[2]{%
    \thesis@setViaIndex{#1}{\arabic{thesis@#1}}{#2}
    \stepcounter{thesis@#1}
}
\newcommand{\thesis@getFrom}[2]{%
    \thesis@getViaIndex{#1}{#2}%
}

% [private] Inner, recursive part of `\thesisInclude'
\newcommand{\thesis@input}[1]{
    \def\@curval{\thesis@getFrom{#1}{\arabic{thesis@iterator}}}
    \ifcsname \@curval\endcsname
    \else
        \input{\@curval}
        \stepcounter{thesis@iterator}
        \thesis@input{#1}
    \fi
}

% [private] Inner, recursive part of `\thesisWriteIncluded'
\newcommand{\thesis@writeInputted}[1]{
    \def\@curval{\thesis@getFrom{#1}{\arabic{thesis@iterator}}}
    \ifcsname \@curval\endcsname
    \else
        \immediate\write\thesis@tempfile{\@curval}
        \stepcounter{thesis@iterator}
        \thesis@writeInputted{#1}
    \fi
}

%---------------------------------------------------

\newcommand{\thesisInput}[1]{
    \setcounter{thesis@iterator}{0}
    \thesis@input{#1}   
}

\newcommand\thesisWriteInputted[2]{
  \immediate\openout\thesis@tempfile=#2
  \setcounter{thesis@iterator}{0}
  \thesis@writeInputted{#1}
  \immediate\closeout\thesis@tempfile
}

%---------------------------------------------------

% Options for `fitthesis.cls'
\def\thesisOptions{
    draft,
    cover,
    keepassignment,
}

% Arrangement of initial pages as defined by `fitthesis.cls'
\newcommand\thesisInitialPages{
    \makeCover
    \makeTitle
    \makeAssignment
    \makeAbstract
    \makeDeclaration
}

%---------------------------------------------------

% Arrangement of chapters
\thesis@add{chapters}{text-01-uvod}
\thesis@add{chapters}{text-02-sparse}
\thesis@add{chapters}{text-03-code-listener}
\thesis@add{chapters}{text-04-zaver}

% Arrangement of appendices
\thesis@add{appendices}{appendix-01-calls-hierarchy}

%---------------------------------------------------

\makeatother
